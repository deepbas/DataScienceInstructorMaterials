{
  "hash": "50fc4da06bdc1b45152aae00ba89bbd8",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"Midterm 1\"\nsubtitle: \"Stat 220: Spring 2024\"\ndate: \" April 24 2024\"\nformat:\n  pdf:\n    includes:\n      in-header: header.tex\nexecute: \n  eval: true\n  echo: true\n  warning: false\n  error: true\n---\n\n\n\n\n\n\n\n\n<center>  \nName:        \n</center> \n\n<br>\n\n## Total Points: 100  \n\n<br>\n<br>\n\n\n\n#\n\n\n## Q1 Consider the following objects and determine what each of the code snippets evaluates to. Briefly explain your answers.\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nx <- -2:2\ny <- c(FALSE, factor(c(\"b\", \"NA\")), 3, NA)\nz <- list(z1 = x, \n          z2 = y, \n          z3 = c(\"Carleton\", \"College\"), \n          z4 = matrix(1:9, nrow = 3))\n```\n:::\n\n\n\n\n### (a)\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nstringr::str_flatten(z[[3]], collapse = \" \")\n```\n:::\n\n\n\n\\vspace*{1in}\n\n\n### (b)\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nz[[2]] - z[[1]]\n```\n:::\n\n\n\n\\vspace*{1.8in}\n\n\n\n\n## Q2 You are provided with a dataset containing simulated data representing properties' prices, square footage, and construction years. The dataset is designed to reflect realistic property characteristics:\n\n- Square Footage (`sqft`): This variable is generated using the `runif` function to produce 100 random numbers following a uniform distribution, specifically ranging from 1000 to 2000 square feet.\n\n- Construction Year (`year`): This variable lists the years properties were constructed, sampled uniformly from 1970 to 2020.\n\n- Price (`price`): The price of each property is generated using the `rnorm` function, which produces 100 random numbers following a normal distribution. The mean price is set with a formula based on both the year of construction and the square footage, calculated as $\\$ 10,000$ plus $\\$ 10,000$ for every year past 1970 and an additional $\\$ 500$ for each square foot over 1000. The standard deviation is set at $\\$ 50,000$, indicating variability in property prices due to factors not included in our simple model.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nset.seed(123) # for reproducibility\ndata <- tibble(\n  year = sample(1970:2020, 100, replace = TRUE),\n  sqft = runif(100, 1000, 2000),  \n  price = rnorm(100, \n                mean = 10000 + (year - 1970) * 10000 + (sqft- 1000) * 500, \n                sd = 50000)\n)\n\nhead(data) # first 6 rows of the dataset\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 6 x 3\n   year  sqft   price\n  <int> <dbl>   <dbl>\n1  2000 1320. 558093.\n2  1984 1308. 328140.\n3  2020 1220. 606597.\n4  1983 1369. 332325.\n5  1972 1984. 590940.\n6  2011 1154. 488081.\n```\n\n\n:::\n:::\n\n\n\n\n### (a) Write code to add a new column called `decade` to this dataset that records the decade of each year, make it a factor, and store it in `data_new`. A decade should be represented as the first year of the decade (e.g., 1980 for any year from 1980 to 1989).\n\n\n\n\n::: {.cell}\n\n:::\n\n::: {.cell}\n\n:::\n\n\n\n\\vspace*{1.8in}\n\n### (b) Fill in the missing parts of a `ggplot2` code snippet to create a time trend plot that displays the trend of property prices over the years. (Refer to the plot on the next page!)\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(data_new, aes(x = _______________, y = _____________)) +\n  geom_line(_______________________) +  \n  geom_point(___________________, ______________________, __________________) +  \n  labs(title = \"________________________________\",\n       x = \"__________________\",\n       y = \"_________________\") +\n  theme_minimal()  \n```\n:::\n\n::: {.cell}\n::: {.cell-output-display}\n![](Midterm1_files/figure-pdf/unnamed-chunk-8-1.pdf)\n:::\n:::\n\n\n\n\n\n \n### (c) Write code to create a scatter plot using `ggplot2` that displays property prices against square footage. Fit a linear model to these data points and color-code the points based on the decade of sale. Fill in the details in the provided code snippet. \n \n  \n\n\n::: {.cell}\n::: {.cell-output-display}\n![](Midterm1_files/figure-pdf/unnamed-chunk-9-1.pdf)\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(data_new, aes(x = _____________, y = ______________, color = __________)) +\n  geom_point() +\n  geom_smooth(method = \"_____________\", se = __________) +\n  labs(title = \"_____________________________________\",\n       x = \"__________________________\",\n       y = \"_________________________\",\n       color = \"______________\") +\n  theme_minimal()\n```\n:::\n\n\n \n\n \n \n### (d) Calculate the mean price and standard error of the price for each decade using the `data_new` data object from part (a) and store it in `stats_by_decade`, which contains information about property prices and the decade of sale. Remember, the formula for standard error is $\\mathrm{SE}=\\frac{\\mathrm{SD}}{\\sqrt{n}}$, where $n$ is the number observations in each group.\n\n\n\n\n\n::: {.cell}\n\n:::\n\n::: {.cell}\n\n:::\n\n\n\n\n\n\n\\vspace*{2in}\n\n### (e) Complete the following code to produce a ribbon plot using the `stats_by_decade` from part (d), which includes the mean and standard error of property prices per decade. Ensure that you transform the decade variable to numeric for appropriate plotting, include a ribbon representing the confidence interval within Â±2 standard errors of the mean, and add points and lines connecting the means at each decade. (Refer to the plot on the next page!)\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nstats_by_decade %>%\n  _________(decade = ___________________(decade)) %>%\n  ggplot(_________(x = ______________, y = _______________)) +\n  geom_ribbon(______(ymin = _________________, ymax = __________________), \n              fill = \"_____\", alpha = _______) +\n  geom_line(_______________________) +\n  geom_point(__________________, _________________) +\n  labs(title = \"________________________________________________\",\n       x = \"__________________________\",\n       y = \"____________________________\",\n       caption = \"_________________________________________________________\") +\n  theme_minimal()\n```\n:::\n\n::: {.cell}\n::: {.cell-output-display}\n![](Midterm1_files/figure-pdf/unnamed-chunk-14-1.pdf)\n:::\n:::\n\n\n\n\n\n## Q3 Miscellaneous\n\n### (a) Given a vector of date strings formatted as `ddmmyyyy` below, convert these strings into UTC date-time objects using the `lubridate` package, and then calculate the duration between each consecutive date in days.\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(lubridate)\ndates <- c(\"01012023\", \"15032024\")\n```\n:::\n\n::: {.cell}\n\n:::\n\n\n\n\n\\newpage\n\n### (b) You are provided with a factor variable `experience` with levels representing professional experience: \"Entry\", \"Mid\", \"Senior\". Reverse the order of these levels to reflect descending order of experience and store it inside `experience_reversed`.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(forcats)\nexperience <- factor(c(\"Entry\", \"Mid\", \"Senior\"), \n                     levels = c(\"Entry\", \"Mid\", \"Senior\"))\n```\n:::\n\n\n\n\\\n\n\n\\\n\n\n\\\n\n\n\n\n::: {.cell}\n\n:::\n\n\n\n\n### (c) Write a function called `prepend_level` that takes any vector of factor levels and prepends the text `\"Level: \"` to each level description. This function should be applicable to any factor levels, making it versatile for various data scenarios.\n\n\n\n\n::: {.cell}\n\n:::\n\n\n\n\\\n\n\n\\\n\n\n\\\n\n\\\n\n\\newpage\n\n### (d) **(Bonus)** What does the following code chunk do? Assume `prepend_level` is the same function that you devised in part (c) and `experience_reversed` is the object that you defined in part (b) above. (5 points)\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nforcats::fct_relabel(experience_reversed, prepend_level)\n```\n:::\n",
    "supporting": [
      "Midterm1_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": null,
    "postProcess": false
  }
}