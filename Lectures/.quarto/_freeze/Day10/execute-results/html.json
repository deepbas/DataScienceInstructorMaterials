{
  "hash": "4b1d3894eb40867f4a84b3c5b57fdfcf",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"Factor manipulations\"\ntitle-slide-attributes:\n  data-background-image: images/lake.jpg\n  data-background-size: contain\n  data-background-opacity: \"0.5\"\nsubtitle: \"STAT 220\"\nauthor: \"Bastola\"\nformat:\n  revealjs: \n    theme: [default, scss/main.scss]\n    slide_level: 2\n    slide-number: true\n    preview-links: auto\n    history: true\n    chalkboard: true\n    transition: slide\n    background-transition: fade    \n    touch: false\n    controls: true\n---\n\n\n\n\n\n\n## Factors - categorical data\n\n\n<center><img src=\"images/forcats_cheatsheet.png\" width=\"60%\" height=\"60%\"></center>\n\n\n\n[See [`forcats` cheatsheet](https://rstudio.github.io/cheatsheets/factors.pdf)\nand [`forcats` vignette](https://forcats.tidyverse.org/)]{.footer}\n\n\n##  Example - specify levels `fct_relevel()`\n\n::: eqt\n::: font70\n::: row\n::: left\n\n\n\n::: {.cell}\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] \"10th\" \"11th\" \"9th\" \n```\n\n\n:::\n:::\n\n::: {.cell}\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 4 × 3\n     id grade grade_fac\n  <int> <chr> <fct>    \n1     2 10th  10th     \n2     3 11th  11th     \n3     1 9th   9th      \n4     4 9th   9th      \n```\n\n\n:::\n:::\n\n\n\n:::\n\n::: right\n\n\n\n::: {.cell}\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] \"9th\"  \"10th\" \"11th\"\n```\n\n\n:::\n:::\n\n::: {.cell}\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 4 × 3\n     id grade grade_fac\n  <int> <chr> <fct>    \n1     1 9th   9th      \n2     4 9th   9th      \n3     2 10th  10th     \n4     3 11th  11th     \n```\n\n\n:::\n:::\n\n\n\n:::\n:::\n:::\n:::\n\n\n## [Example - collapse levels `fct_collapse()` and `fct_lump()`]{.font60}\n\n::: bql\n\n\n\n::: {.cell}\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 6 × 4\n  loc   loc_fac loc2  loc3 \n  <chr> <fct>   <fct> <fct>\n1 SW    SW      south other\n2 NW    NW      north NW   \n3 NW    NW      north NW   \n4 NE    NE      north other\n5 SE    SE      south SE   \n6 SE    SE      south SE   \n```\n\n\n:::\n:::\n\n\n\n:::\n\n\n\n## Order factor levels: `fct_infreq()`\n\n::: eqt\n::: font90\n`fct_infreq()` : This function orders factor levels by their frequency in the data.\n\n\n\n::: {.cell}\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] \"9th\"  \"10th\" \"11th\"\n```\n\n\n:::\n:::\n\n\n\n:::\n:::\n\n## `fct_rev()` : Reverse the order of factor levels\n\n::: eqt\n::: font80\n\n\n\n::: {.cell}\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] \"9th\"  \"11th\" \"10th\"\n```\n\n\n:::\n:::\n\n\n\n:::\n:::\n\n## `fct_anon()`\n\n::: eqt\n::: font80\n\n`fct_anon()`: Anonymize factor levels by replacing them with unique, randomly generated character strings.\n\n\n\n::: {.cell}\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] \"1\" \"2\" \"3\"\n```\n\n\n:::\n:::\n\n\n\n:::\n:::\n\n::: centered-content\n## <i class=\"fa fa-pencil-square-o\" style=\"font-size:48px;color:purple\"> Group Activity 1</i> {background=\"#ffdf9e\"}\n\n::: row\n::: left\n![](https://media.giphy.com/media/RKApDdwsQ6jkwd6RNn/giphy.gif)\n:::\n\n::: right\n\n<br>\n\n::: lqt\n\n- Please clone the `ca10-yourusername` repository from  [Github](https://github.com/DataScienceSpring24)\n- Please do the problem 1 in the class activity for today\n:::\n:::\n:::\n\npreserve72701864c261c168\n:::\n\n\n## `gss_cat`\n\n::: eqt\n\nA sample of data from the General Social Survey, a long-running US survey conducted by NORC at the University of Chicago.\n\n\n\n\n::: {.cell}\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 21,483 × 9\n    year marital         age race  rincome        partyid    relig denom tvhours\n   <int> <fct>         <int> <fct> <fct>          <fct>      <fct> <fct>   <int>\n 1  2000 Never married    26 White $8000 to 9999  Ind,near … Prot… Sout…      12\n 2  2000 Divorced         48 White $8000 to 9999  Not str r… Prot… Bapt…      NA\n 3  2000 Widowed          67 White Not applicable Independe… Prot… No d…       2\n 4  2000 Never married    39 White Not applicable Ind,near … Orth… Not …       4\n 5  2000 Divorced         25 White Not applicable Not str d… None  Not …       1\n 6  2000 Married          25 White $20000 - 24999 Strong de… Prot… Sout…      NA\n 7  2000 Never married    36 White $25000 or more Not str r… Chri… Not …       3\n 8  2000 Divorced         44 White $7000 to 7999  Ind,near … Prot… Luth…      NA\n 9  2000 Married          44 White $25000 or more Not str d… Prot… Other       0\n10  2000 Married          47 White $25000 or more Strong re… Prot… Sout…       3\n# ℹ 21,473 more rows\n```\n\n\n:::\n:::\n\n\n\n:::\n\n## Which religions watch the least TV?\n\n\n\n::: {.cell layout-align=\"center\"}\n::: {.cell-output-display}\n![](Day10_files/figure-revealjs/gss-religion-tv-1.png){fig-align='center' width=100%}\n:::\n:::\n\n\n\n\n\n\n## Which one do you prefer?\n\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](Day10_files/figure-revealjs/gss-religion-oredering-1.png){width=100%}\n:::\n:::\n\n\n\n\n## Why is the y-axis in this order?\n\n\n\n::: {.cell layout-align=\"center\"}\n::: {.cell-output-display}\n![](Day10_files/figure-revealjs/unnamed-chunk-10-1.png){fig-align='center' width=62%}\n:::\n:::\n\n\n\n\n::: middle-align-xy\n\n## Levels of a factor\n\n::: scroll-box-20\n\n\n::: {.cell}\n::: {.cell-output .cell-output-stdout}\n\n```\n [1] \"No answer\"               \"Don't know\"             \n [3] \"Inter-nondenominational\" \"Native american\"        \n [5] \"Christian\"               \"Orthodox-christian\"     \n [7] \"Moslem/islam\"            \"Other eastern\"          \n [9] \"Hinduism\"                \"Buddhism\"               \n[11] \"Other\"                   \"None\"                   \n[13] \"Jewish\"                  \"Catholic\"               \n[15] \"Protestant\"              \"Not applicable\"         \n```\n\n\n:::\n:::\n\n\n\n:::\n:::\n\n::: middle-align-xy\n\n## Most useful factor skills\n\n::: bql\n\n1. **Reorder** the levels\n\n2. **Recode** the levels\n\n3. **Collapse** levels\n\n4. **Lump** levels\n\n:::\n:::\n\n## Reorder relig by tvhours\n\n\n\n::: {.cell layout-align=\"center\"}\n::: {.cell-output-display}\n![](Day10_files/figure-revealjs/reorder-tv-relig-1.png){fig-align='center' width=960}\n:::\n:::\n\n\n\n\n## Reorder relig by tvhours\n\n\n\n::: {.cell layout-align=\"center\"}\n::: {.cell-output-display}\n![](Day10_files/figure-revealjs/reorder-tv-relig1-1.png){fig-align='center' width=960}\n:::\n:::\n\n\n\n\n## Which political leaning watches more TV?\n\n\n\n\n::: {.cell layout-align=\"center\"}\n::: {.cell-output-display}\n![](Day10_files/figure-revealjs/unnamed-chunk-11-1.png){fig-align='center' width=50%}\n:::\n:::\n\n\n\n\n\nHow could we improve the `partyid` labels?\n\n##  `fct_recode()`\n\n::: panel-tabset\n\n### Plot\n\n\n\n::: {.cell layout-align=\"center\"}\n::: {.cell-output-display}\n![](Day10_files/figure-revealjs/fct-recode-partyid-1.png){fig-align='center' width=960}\n:::\n:::\n\n\n\n### Code\n\n\n\n::: {.cell}\n\n:::\n\n\n\n\n:::\n\n## `fct_collapse()`\n\n::: panel-tabset\n\n### Plot\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](Day10_files/figure-revealjs/fct-collapse-partyid-1.png){width=960}\n:::\n:::\n\n\n\n\n### Code\n\n\n\n::: {.cell}\n\n:::\n\n\n\n\n:::\n\n\n##  `fct_lump()`\n\n::: panel-tabset\n\n### Code\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](Day10_files/figure-revealjs/fct-lump-partyid-1.png){width=960}\n:::\n:::\n\n\n\n\n### Plot\n\n\n\n::: {.cell}\n\n:::\n\n\n\n:::\n\n# Summary\n\n::: cle\n::: font90\nTo enhance your data analysis, you can use the following factor manipulation techniques:\n\n- Reorder the levels to arrange them in a meaningful order.\n- Recode the levels to modify the labels or merge similar categories.\n- Collapse levels to group multiple categories into one.\n- Lump levels to reduce the number of categories by combining less frequent ones.\n\n:::\n:::\n\n::: centered-content\n## <i class=\"fa fa-pencil-square-o\" style=\"font-size:48px;color:purple\"> Group Activity 2</i> {background=\"#ffdf9e\"}\n\n::: row\n::: left\n![](https://media.giphy.com/media/RKApDdwsQ6jkwd6RNn/giphy.gif)\n:::\n\n::: right\n\n<br>\n\n::: lqt\n\n- Please do the remaining problems in the class activity.\n- Submit to Gradescope on [moodle](https://moodle.carleton.edu/course/view.php?id=43692) when done!\n:::\n:::\n:::\n\npreserve2eef859d30b285a6\n:::\n",
    "supporting": [
      "Day10_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-in-header": [
        "<link href=\"Day10_files/libs/countdown/countdown.css\" rel=\"stylesheet\" />\n<script src=\"Day10_files/libs/countdown/countdown.js\"></script>\n"
      ],
      "include-after-body": [
        "\n<script>\n  // htmlwidgets need to know to resize themselves when slides are shown/hidden.\n  // Fire the \"slideenter\" event (handled by htmlwidgets.js) when the current\n  // slide changes (different for each slide format).\n  (function () {\n    // dispatch for htmlwidgets\n    function fireSlideEnter() {\n      const event = window.document.createEvent(\"Event\");\n      event.initEvent(\"slideenter\", true, true);\n      window.document.dispatchEvent(event);\n    }\n\n    function fireSlideChanged(previousSlide, currentSlide) {\n      fireSlideEnter();\n\n      // dispatch for shiny\n      if (window.jQuery) {\n        if (previousSlide) {\n          window.jQuery(previousSlide).trigger(\"hidden\");\n        }\n        if (currentSlide) {\n          window.jQuery(currentSlide).trigger(\"shown\");\n        }\n      }\n    }\n\n    // hookup for slidy\n    if (window.w3c_slidy) {\n      window.w3c_slidy.add_observer(function (slide_num) {\n        // slide_num starts at position 1\n        fireSlideChanged(null, w3c_slidy.slides[slide_num - 1]);\n      });\n    }\n\n  })();\n</script>\n\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {
      "preserve2eef859d30b285a6": "<div class=\"countdown\" id=\"timer_c83fbf59\" data-update-every=\"1\" tabindex=\"0\" style=\"top:0;left:0;padding:3px 4px;font-size:1em;\">\n<div class=\"countdown-controls\"><button class=\"countdown-bump-down\">&minus;</button><button class=\"countdown-bump-up\">&plus;</button></div>\n<code class=\"countdown-time\"><span class=\"countdown-digits minutes\">10</span><span class=\"countdown-digits colon\">:</span><span class=\"countdown-digits seconds\">00</span></code>\n</div>",
      "preserve72701864c261c168": "<div class=\"countdown\" id=\"timer_f5b2c23c\" data-update-every=\"1\" tabindex=\"0\" style=\"top:0;left:0;padding:3px 4px;font-size:1em;\">\n<div class=\"countdown-controls\"><button class=\"countdown-bump-down\">&minus;</button><button class=\"countdown-bump-up\">&plus;</button></div>\n<code class=\"countdown-time\"><span class=\"countdown-digits minutes\">10</span><span class=\"countdown-digits colon\">:</span><span class=\"countdown-digits seconds\">00</span></code>\n</div>"
    },
    "postProcess": true
  }
}