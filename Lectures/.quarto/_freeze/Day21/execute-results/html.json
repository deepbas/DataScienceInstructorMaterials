{
  "hash": "a593bf8bece85775856a4ddb8612513a",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"Intro to Classification\"\ntitle-slide-attributes:\n  data-background-image: images/lake.jpg\n  data-background-size: contain\n  data-background-opacity: \"0.5\"\nsubtitle: \"STAT 220\"\nauthor: \"Bastola\"\nformat:\n  revealjs: \n    theme: [default, scss/main.scss]\n    slide_level: 2\n    slide-number: true\n    preview-links: auto\n    history: true\n    chalkboard: true\n    transition: slide\n    background-transition: fade    \n    touch: false\n    controls: true\nfilters:\n  - shinylive\n  - webr\n---\n\n\n\n\n\n\n\n## Classification\n\n\n::: cle\n\nPredicting what category a (future) observation falls into\n\n- Astronomy: Whether an exoplanet is habitable (or not)\n- Filtering: Identify spam emails\n- Medicine: Use lab results to determine who has a disease (or not)\n- Product preference: make product recommendations based on past purchases\n\n:::\n\n\n\n\n##\n\n\n\n::: {.cell}\n<style type=\"text/css\">\n.container-forest {\n  background-image: url('images/forest_fire.jpg');\n  background-size: cover;\n  background-position: center;\n  height: 70vh; \n  width: 100%;\n  position: relative; \n  display: flex;\n  align-items: center; \n  justify-content: center; \n}\n</style>\n:::\n\n\n\n<div class=\"container-forest\">\n  <div class=\"yellow-h\">\n    Fire can be deadly, destroying homes, wildlife habitat and timber, and polluting the air with harmful emissions.\n  </div>\n</div>\n\n\n\n\n## Predicting the next forest fire ..\n\n::: vvt\n\n**Dataset**\n\n- contains a culmination of forest fire observations \n- based on two regions of Algeria: the Bejaia region and the Sidi Bel-Abbes region. \n- from June 2012 to September 2012\n\n:::\n\n[Click [here](https://archive.ics.uci.edu/dataset/547/algerian+forest+fires+dataset) to learn more about the dataset]{.footer}\n\n\n\n## Data Description \n\n::: font60\n\nVariable | Description\n-------- | -------------\n`Date` | (DD-MM-YYYY) Day, month, year \n`Temp` | Noon temperature in Celsius degrees: 22 to 42\n`RH` | Relative Humidity in percentage: 21 to 90\n`Ws` | Wind speed in km/h: 6 to 29\n`Rain` | Daily total rain in mm: 0 to 16.8\n`Fine Fuel Moisture Code (FFMC) index` | 28.6 to 92.5\n`Duff Moisture Code (DMC) index` | 1.1 to 65.9\n`Drought Code (DC) index` | 7 to 220.4\n`Initial Spread Index (ISI) index` | 0 to 18.5\n`Buildup Index (BUI) index` | 1.1 to 68\n`Fire Weather Index (FWI) index` | 0 to 31.1\n`Classes` | Two classes, namely fire and not fire\n\n:::\n\n\n\n## Glimpse of the data \n\n::: scroll-box-20\n::: font60\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n\n\n|date       | temperature| rh| ws| rain| ffmc|  dmc|   dc| isi|  bui| fwi|classes  |\n|:----------|-----------:|--:|--:|----:|----:|----:|----:|---:|----:|---:|:--------|\n|2012-06-01 |          29| 57| 18|  0.0| 65.7|  3.4|  7.6| 1.3|  3.4| 0.5|not fire |\n|2012-06-02 |          29| 61| 13|  1.3| 64.4|  4.1|  7.6| 1.0|  3.9| 0.4|not fire |\n|2012-06-03 |          26| 82| 22| 13.1| 47.1|  2.5|  7.1| 0.3|  2.7| 0.1|not fire |\n|2012-06-04 |          25| 89| 13|  2.5| 28.6|  1.3|  6.9| 0.0|  1.7| 0.0|not fire |\n|2012-06-05 |          27| 77| 16|  0.0| 64.8|  3.0| 14.2| 1.2|  3.9| 0.5|not fire |\n|2012-06-06 |          31| 67| 14|  0.0| 82.6|  5.8| 22.2| 3.1|  7.0| 2.5|fire     |\n|2012-06-07 |          33| 54| 13|  0.0| 88.2|  9.9| 30.5| 6.4| 10.9| 7.2|fire     |\n|2012-06-08 |          30| 73| 15|  0.0| 86.6| 12.1| 38.3| 5.6| 13.5| 7.1|fire     |\n|2012-06-09 |          25| 88| 13|  0.2| 52.9|  7.9| 38.8| 0.4| 10.5| 0.3|not fire |\n|2012-06-10 |          28| 79| 12|  0.0| 73.2|  9.5| 46.3| 1.3| 12.6| 0.9|not fire |\n\n\n:::\n:::\n\n\n\n:::\n:::\n\n## Scatterplot\n\n\n\n::: {.cell layout-align=\"center\"}\n::: {.cell-output-display}\n![](Day21_files/figure-revealjs/unnamed-chunk-3-1.png){fig-align='center' width=80%}\n:::\n:::\n\n\n\n\n\n## Classifying a new observation?\n\n\n\n::: {.cell layout-align=\"center\"}\n::: {.cell-output-display}\n![](Day21_files/figure-revealjs/unnamed-chunk-4-1.png){fig-align='center' width=80%}\n:::\n:::\n\n\n\n\n##\n\n::: cle\n::: font80\n\n::: row\n::: left\n\n![](images/distance-metrics.png)\n\n:::\n\n\n::: right\n\n\nEuclidean distance: the straight line distance between two points on the x-y plane with coordinates  \n$(x_a, y_a)$ and  $(x_b,y_b)$\n\n$${\\rm Distance} = \\sqrt{\\left(x_a - x_b \\right)^2 + \\left( y_a - y_b \\right)^2}$$\n\n\nManhattan distance: the \"taxi-cab\" distance between two points on the x-y plane\n\n$${\\rm Distance} = \\left|x_a - x_b \\right| + \\left| y_a - y_b \\right|$$\n\n:::\n:::\n\n:::\n:::\n\n## Looking at Euclidean distance\n\n\n\n::: {.cell layout-align=\"center\"}\n::: {.cell-output-display}\n![](Day21_files/figure-revealjs/unnamed-chunk-5-1.png){fig-align='center' width=80%}\n:::\n:::\n\n\n\n\n\n\n## 1-Nearest Neighbor (NN)\n\n\n\n::: {.cell layout-align=\"center\"}\n::: {.cell-output-display}\n![](Day21_files/figure-revealjs/unnamed-chunk-6-1.png){fig-align='center' width=80%}\n:::\n:::\n\n\n\n\n\n## 10-NN\n\n\n\n::: {.cell layout-align=\"center\"}\n::: {.cell-output-display}\n![](Day21_files/figure-revealjs/unnamed-chunk-7-1.png){fig-align='center' width=80%}\n:::\n:::\n\n\n\n\n\n## 10-NN\n\n\n\n\n::: {.cell layout-align=\"center\"}\n::: {.cell-output-display}\n![](Day21_files/figure-revealjs/unnamed-chunk-8-1.png){fig-align='center' width=80%}\n:::\n:::\n\n\n\n\n\n<div style=\"position: absolute; top: 70%; left: 10%;\">\n<span style=\"content: '\\2192'; font-size: 40px; color: #FF00FF; text-align: center; white-space: pre-line;\">\n  <p>Wait, something is not quite right..</p>\n</span>\n</div>\n\n\n\n\n## Need to standardize data\n\n::: zen\n::: font70\n\n::: row\n::: left\n\n\n\n::: {.cell}\n\n:::\n\n\n\n:::\n\n::: right\n\n\n\n::: {.cell}\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 1 × 2\n   ffmc temperature\n  <dbl>       <dbl>\n1  14.3        3.63\n```\n\n\n:::\n:::\n\n\n\n:::\n:::\n\n- Predictors with larger variation will have larger influence on which cases are “nearest” neighbors\n- Methods relying on distance can be sensitive (i.e. not invariant) to the scale of the predictors\n- Standardizing only shifts and rescales the variable, it doesn't change the shape of the distribution\n\n:::\n:::\n\n\n##\n\n![](images/horst_dplyr_across.png)\n\n\n\n## Standardized data\n\n::: scroll-box-20\n::: font60\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n\n\n|date       | temperature|         rh|         ws|       rain|       ffmc|        dmc|         dc|        isi|        bui|        fwi|classes  |\n|:----------|-----------:|----------:|----------:|----------:|----------:|----------:|----------:|----------:|----------:|----------:|:--------|\n|2012-06-01 |  -0.8688614| -0.3399715|  0.8914370| -0.3808708| -0.8461805| -0.9102414| -0.8775901| -0.8286454| -0.9340836| -0.8783457|not fire |\n|2012-06-02 |  -0.8688614| -0.0702145| -0.8870457|  0.2680887| -0.9367751| -0.8537581| -0.8775901| -0.9008609| -0.8989427| -0.8917856|not fire |\n|2012-06-03 |  -1.6957543|  1.3460097|  2.3142231|  6.1586438| -2.1423802| -0.9828629| -0.8880798| -1.0693637| -0.9832809| -0.9321051|not fire |\n|2012-06-04 |  -1.9713852|  1.8180845| -0.8870457|  0.8671282| -3.4316110| -1.0796914| -0.8922757| -1.1415792| -1.0535628| -0.9455449|not fire |\n|2012-06-05 |  -1.4201233|  1.0088135|  0.1800439| -0.3808708| -0.9088999| -0.9425176| -0.7391255| -0.8527172| -0.8989427| -0.8783457|not fire |\n|2012-06-06 |  -0.3175995|  0.3344210| -0.5313491| -0.3808708|  0.3315493| -0.7165844| -0.5712896| -0.3953525| -0.6810689| -0.6095490|fire     |\n\n\n:::\n:::\n\n\n\n:::\n:::\n\n## 1-NN again\n\n\n\n\n::: {.cell}\n\n:::\n\n::: {.cell layout-align=\"center\"}\n::: {.cell-output-display}\n![](Day21_files/figure-revealjs/unnamed-chunk-13-1.png){fig-align='center' width=80%}\n:::\n:::\n\n\n\n\n\n## 10-NN again\n\n\n\n::: {.cell layout-align=\"center\"}\n::: {.cell-output-display}\n![](Day21_files/figure-revealjs/unnamed-chunk-14-1.png){fig-align='center' width=80%}\n:::\n:::\n\n\n\n\n\n## 50-NN again\n\n\n\n::: {.cell layout-align=\"center\"}\n::: {.cell-output-display}\n![](Day21_files/figure-revealjs/unnamed-chunk-15-1.png){fig-align='center' width=80%}\n:::\n:::\n\n\n\n\n\n\n## Visualizing the decision boundary\n\n::: ws\n\n- We can map out the region in feature-space where the classifier would predict 'fire', and the kinds where it would predict 'not fire'\n\n- There is some boundary between the two, where points on one side of\nthe boundary will be classified 'fire' and points on the other side will be\nclassified 'not fire'\n\n- This boundary is called **decision boundary**\n\n:::\n\n\n\n## Visualizing the decision boundary\n\n\n\n::: {.cell layout-align=\"center\"}\n::: {.cell-output-display}\n![](Day21_files/figure-revealjs/unnamed-chunk-16-1.png){fig-align='center' width=80%}\n:::\n:::\n\n\n\n\n\n## 1-NN decision boundary\n\n\n\n::: {.cell layout-align=\"center\"}\n::: {.cell-output-display}\n![](Day21_files/figure-revealjs/unnamed-chunk-17-1.png){fig-align='center' width=80%}\n:::\n:::\n\n\n\n\n\n## 25-NN decision boundary\n\n\n\n::: {.cell layout-align=\"center\"}\n::: {.cell-output-display}\n![](Day21_files/figure-revealjs/unnamed-chunk-18-1.png){fig-align='center' width=80%}\n:::\n:::\n\n\n\n\n\n\n::: middle-align-xy\n\n##\n\n\n\n::: row\n::: left\n\n![](images/tidymodels.png)\n\n:::\n\n::: right\na collection of packages for modeling and machine learning using tidyverse principles\n:::\n:::\n\n:::\n\n\n## 1. Load data and convert to correct data types\n\n::: cle\n\n\n\n::: {.cell}\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 6 × 3\n  temperature  ffmc classes \n        <dbl> <dbl> <fct>   \n1          29  65.7 not fire\n2          29  64.4 not fire\n3          26  47.1 not fire\n4          25  28.6 not fire\n5          27  64.8 not fire\n6          31  82.6 fire    \n```\n\n\n:::\n:::\n\n\n\n:::\n\n##\n\n![](images/recipe.jpg)\n\n\n::: middle-align-xy\n\n## 2. Create a recipe for data preprocessing\n\n::: cle\n\n\n\n::: {.cell}\n\n:::\n\n\n\n:::\n:::\n\n## 3. Apply the recipe to the data set\n\n::: cle\n\n\n\n::: {.cell}\n\n:::\n\n::: {.cell}\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 243 × 3\n   temperature   ffmc classes \n         <dbl>  <dbl> <fct>   \n 1      -0.869 -0.846 not fire\n 2      -0.869 -0.937 not fire\n 3      -1.70  -2.14  not fire\n 4      -1.97  -3.43  not fire\n 5      -1.42  -0.909 not fire\n 6      -0.318  0.332 fire    \n 7       0.234  0.722 fire    \n 8      -0.593  0.610 fire    \n 9      -1.97  -1.74  not fire\n10      -1.14  -0.324 not fire\n# ℹ 233 more rows\n```\n\n\n:::\n:::\n\n\n\n:::\n\n\n::: middle-align-xy\n\n## 4. Create a model specification\n\n::: cle\n\n\n\n::: {.cell}\n\n:::\n\n\n\n:::\n\n:::\n\n::: middle-align-xy\n\n## 5. Fit the model on the preprocessed data\n\n::: cle\n\n\n\n::: {.cell}\n\n:::\n\n\n\n:::\n:::\n\n\n## 6. Classify\n\n::: cle\n\nSuppose we get two new observations, use predict to classify the observations\n\n\n\n\n::: {.cell}\n\n:::\n\n::: {.cell}\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 2 × 1\n  .pred_class\n  <fct>      \n1 not fire   \n2 fire       \n```\n\n\n:::\n:::\n\n\n\n:::\n\n\n## Further Practice: Pima Indians Diabetes \n\n::: bql\n\n- Owned by the National Institute of Diabetes and Digestive and Kidney Diseases\n- A data frame with 768 observations on 9 variables.\n- We have the lab results of 158 patients, including whether they have CKD\n- Response variable: `diabetes` =\t`pos`, `neg`\n- Predictor variables: _pregnant, glucose, pressure, triceps, insulin, mass,  pedigree, age_ \n\n:::\n\n\n## Variables\n\n::: font80\n\nVariable | Description\n-------- | -------------\n`pregnant`| Number of times pregnant\n`glucose` | Plasma glucose concentration (glucose tolerance test)\n`pressure` | Diastolic blood pressure (mm Hg)\n`triceps` | Triceps skinfold thickness (mm)\n`insulin` | 2-Hour serum insulin (mu U/ml)\n`mass` | Body mass index (weight in kg/(height in m)\\²)\n`pedigree` | Diabetes pedigree function\n`age` | Age (years)\n`diabetes` | diabetes case (pos/neg)\n\n:::\n\n::: centered-content\n\n## <i class=\"fa fa-pencil-square-o\" style=\"font-size:48px;color:purple\"> Group Activity 1</i> {background=\"#ffdf9e\"}\n\n::: row\n::: left\n![](https://media.giphy.com/media/RKApDdwsQ6jkwd6RNn/giphy.gif)\n:::\n\n::: right\n\n<br>\n\n::: lqt\n\n- Please clone the `ca21-yourusername` repository from  [Github](https://github.com/DataScienceSpring24)\n- Please do the problems in the class activity for today\n\n:::\n:::\n:::\n\n`<div class=\"countdown\" id=\"timer_933cc1f5\" data-update-every=\"1\" tabindex=\"0\" style=\"top:0;left:0;padding:3px 4px;font-size:1em;\">\n<div class=\"countdown-controls\"><button class=\"countdown-bump-down\">&minus;</button><button class=\"countdown-bump-up\">&plus;</button></div>\n<code class=\"countdown-time\"><span class=\"countdown-digits minutes\">10</span><span class=\"countdown-digits colon\">:</span><span class=\"countdown-digits seconds\">00</span></code>\n</div>`{=html}\n:::\n\n\n\n",
    "supporting": [
      "Day21_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-in-header": [
        "<link href=\"Day21_files/libs/countdown-0.4.0/countdown.css\" rel=\"stylesheet\" />\n<script src=\"Day21_files/libs/countdown-0.4.0/countdown.js\"></script>\n"
      ],
      "include-after-body": [
        "\n<script>\n  // htmlwidgets need to know to resize themselves when slides are shown/hidden.\n  // Fire the \"slideenter\" event (handled by htmlwidgets.js) when the current\n  // slide changes (different for each slide format).\n  (function () {\n    // dispatch for htmlwidgets\n    function fireSlideEnter() {\n      const event = window.document.createEvent(\"Event\");\n      event.initEvent(\"slideenter\", true, true);\n      window.document.dispatchEvent(event);\n    }\n\n    function fireSlideChanged(previousSlide, currentSlide) {\n      fireSlideEnter();\n\n      // dispatch for shiny\n      if (window.jQuery) {\n        if (previousSlide) {\n          window.jQuery(previousSlide).trigger(\"hidden\");\n        }\n        if (currentSlide) {\n          window.jQuery(currentSlide).trigger(\"shown\");\n        }\n      }\n    }\n\n    // hookup for slidy\n    if (window.w3c_slidy) {\n      window.w3c_slidy.add_observer(function (slide_num) {\n        // slide_num starts at position 1\n        fireSlideChanged(null, w3c_slidy.slides[slide_num - 1]);\n      });\n    }\n\n  })();\n</script>\n\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}