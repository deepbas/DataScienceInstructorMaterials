{
  "hash": "5e6cf4ae119181318d47dd96e85e9727",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"Class Activity 5\"\nauthor: \"Your name here\"\ndate: \" April 02 2024\"\nformat:\n  pdf: default\n  html:\n    df_print: paged\neditor: visual\nexecute: \n  eval: true\n  echo: true\n  warning: false\n  error: true\n---\n\n\n\n\n\n\n\n## Problem 1: Changing color and shape scales\n\nIn this problem, you will learn about the effects of changing colors, scales, and shapes in `ggplot2` for both gradient and discrete color choices. You will be given a series of questions and examples to enhance your understanding. Consider the following scatter plot\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Generate sample data\nset.seed(42)\ndata <- data.frame(\n  Category = factor(sample(1:3, 50, replace = TRUE), labels = c(\"A\", \"B\", \"C\")),\n  X = 10 ^ rnorm(50, mean = 2, sd = 1),\n  Y = rnorm(50, mean = 0, sd = 1)\n)\n\np <- ggplot(data, aes(x = X, y = Y, color = Category)) +\n  geom_point(size = 3)\n\np\n```\n\n::: {.cell-output-display}\n![](class_activity_5_files/figure-pdf/unnamed-chunk-1-1.pdf){fig-pos='H'}\n:::\n:::\n\n\n\n\na. Modify the scatter plot to use custom colors for each category using `scale_color_manual()`. What is the effect of changing the colors on the plot's readability?\n\n\n*Answer:* \n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\np <- ggplot(data, aes(x = , y = , color = )) +\n  geom_point(size = 3) \n\np\n```\n\n::: {.cell-output .cell-output-error}\n\n```\nError in `geom_point()`:\n! Problem while setting up geom.\ni Error occurred in the 1st layer.\nCaused by error in `compute_geom_1()`:\n! `geom_point()` requires the following missing aesthetics: x and y\n```\n\n\n:::\n:::\n\n\n\n\n\n\n\nb. Modify the scatter plot to use custom shapes for each category using `scale_shape_manual()`. What is the effect of changing the shapes on the plot's readability?\n\n\n*Answer:*  Changing the shapes using scale_shape_manual() helps to distinguish between categories and improves the plot's readability\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\np <- ggplot(data, aes(x = , y = , shape = ,  color = )) +\n  geom_point(size = 3) \n\np\n```\n\n::: {.cell-output .cell-output-error}\n\n```\nError in `geom_point()`:\n! Problem while setting up geom.\ni Error occurred in the 1st layer.\nCaused by error in `compute_geom_1()`:\n! `geom_point()` requires the following missing aesthetics: x and y\n```\n\n\n:::\n:::\n\n\n\n\n\nc. Try modifying the plot by combining color, shape, and theme customizations. Additionally, try using `geom_smooth()` to add trend lines for each category. Pay attention to how each element affects the overall readability and interpretability of the plot.\n\n\n*Answer:*\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\np <- ggplot(data, aes(x = X, y = Y)) +\n  geom_point(aes(color = , shape = ), size = 3) + \n  geom_smooth(aes(group = , color = ), method = \"lm\", se = FALSE)\n\n\np\n```\n\n::: {.cell-output-display}\n![](class_activity_5_files/figure-pdf/unnamed-chunk-4-1.pdf){fig-pos='H'}\n:::\n:::\n\n\n\n\n\n\n## Problem 2: US maps\n\n\nNow, let's learn about the effect of changing various coordinate systems in `ggplot2` using a map example from the `usmap` package. We will explore the different types of coordinate systems available in ggplot2 and how they can be applied to the map visualization.\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n#install.packages(\"usmap\")   #uncomment to install\nlibrary(usmap)\n```\n:::\n\n\n\n\n\n### a. Plot a simple map of the United States using `ggplot2` and the `usmap` package.\n\n*Answer:*\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nus <- \nus\n```\n\n::: {.cell-output .cell-output-error}\n\n```\nError in eval(expr, envir, enclos): object 'us' not found\n```\n\n\n:::\n:::\n\n\n\n\n\n\n### b. Apply the `coord_flip()` function to the map to flip the x and y axes.\n\n\n*Answer:*\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nus_flipped <- \nus_flipped\n```\n\n::: {.cell-output .cell-output-error}\n\n```\nError in eval(expr, envir, enclos): object 'us_flipped' not found\n```\n\n\n:::\n:::\n\n\n\n\n\n\n\n### c.  Apply the `coord_polar()` function to the map to transform the plot to a polar coordinate system\n\n\n*Answer:*\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nus_polar <- \nus_polar\n```\n\n::: {.cell-output .cell-output-error}\n\n```\nError in eval(expr, envir, enclos): object 'us_polar' not found\n```\n\n\n:::\n:::\n\n\n\n\n\n### d. Apply the `coord_quickmap()` function to the map to provide an approximation for a map projection.\n\n\n*Answer:*\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nus_quickmap <- \nus_quickmap\n```\n\n::: {.cell-output .cell-output-error}\n\n```\nError in eval(expr, envir, enclos): object 'us_quickmap' not found\n```\n\n\n:::\n:::\n\n\n\n\n\n# Problem 3: Chloropeth map\n\nIn today's class we created `cloropleth` maps of states in the US based on ACS data.\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nstates <- map_data(\"state\")\nACS <- read.csv(\"https://raw.githubusercontent.com/deepbas/statdatasets/main/ACS.csv\")\nACS <- dplyr::filter(ACS, !(region  %in% c(\"Alaska\", \"Hawaii\"))) # only 48+D.C.\nACS$region <- tolower(ACS$region)  # lower case (match states regions)\n```\n:::\n\n\n\n\n### (a) Mapping median income\n\nCreate a `cloropleth` plot that uses color to create a `MedianIncome` map of the US.\n\n*Answer:*\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# map median income\nggplot(data= ) + coord_map() + \n  geom_map(aes(map_id = , fill = ), map = ) +\n  expand_limits(x= , y= ) \n```\n\n::: {.cell-output .cell-output-error}\n\n```\nError in `geom_map()`:\n! `map` must be a data frame, not absent.\n```\n\n\n:::\n:::\n\n\n\n\n### (b) Mapping deviations from national median income\n\nThe median income in the US in 2016 was estimated to be \\$27,000. Redraw your map in (a) to visualize each state's deviation from national median income.\n\n*Answer:*\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# compare state income to national income\nggplot(data= ) + coord_map() + \n  geom_map(aes(map_id = , fill = ), map = ) +\n  expand_limits(x= , y= ) \n```\n\n::: {.cell-output .cell-output-error}\n\n```\nError in `geom_map()`:\n! `map` must be a data frame, not absent.\n```\n\n\n:::\n:::\n\n\n\n\n### (c) Changing numerically scaled color\n\nYou should use a *diverging* color for (b) to highlight larger deviations from the national median. Add `scale_fill_distiller` to the map from (b) and select a diverging palette.\n\n*Answer:*\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# change to a diverging color\nggplot(data= ) + coord_map() + \n  geom_map(aes(map_id = , fill = ), map = ) +\n  expand_limits(x= , y= ) \n```\n\n::: {.cell-output .cell-output-error}\n\n```\nError in `geom_map()`:\n! `map` must be a data frame, not absent.\n```\n\n\n:::\n:::\n\n\n\n\n### (d) Fixing a midpoint on a diverging scale\n\nUse `scale_fill_gradient2` to fix a midpoint scale value at a white color, with diverging colors for larger positive and negative values. Apply this color to your map in (b) and fix the `midpoint` at an appropriate value.\n\n*Answer:*\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# change to a gradient fill color\nggplot(data=) + coord_map() + \n  geom_map(aes(map_id = , fill = ), map = ) +\n  expand_limits(x=, y=) + ggtitle(\"\") \n```\n\n::: {.cell-output .cell-output-error}\n\n```\nError in `geom_map()`:\n! `map` must be a data frame, not absent.\n```\n\n\n:::\n:::\n\n\n\n\n\n\n### (e) Polygon map\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Merge income data with geographic information\nincome_data <- left_join(states, ACS, by = c(\"region\" = \"region\"))\n```\n:::\n\n\n\n\n\nFor this task, you will create a polygon map to visualize the `MedianIncome` across different states. Pay attention to the shapes and sizes of states as depicted on the map.\n\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(sf)\n\nggplot(data = income_data) +\n  geom_polygon() +\n  coord_sf() +\n  labs(fill = \"Median Income\", title = \"Median Income by State\") +\n  theme_minimal()\n```\n\n::: {.cell-output .cell-output-error}\n\n```\nError in `geom_polygon()`:\n! Problem while setting up geom.\ni Error occurred in the 1st layer.\nCaused by error in `compute_geom_1()`:\n! `geom_polygon()` requires the following missing aesthetics: x and y\n```\n\n\n:::\n:::\n\n\n\n\n\n\n### (f) Visualizing Relative Income Deviation \n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nnational_median <- 27000\n\nACS$IncomeDeviationPercent <- ((ACS$MedianIncome - national_median) / national_median) * 100\nincome_data <- left_join(states, ACS, by = c(\"region\" = \"region\"))\n\nggplot(data = income_data) +\n  geom_polygon() +\n  coord_sf() +\n  labs(fill = \"Income Deviation (%)\", title = \"Income Deviation from National Median by State (%)\") +\n  theme_minimal() \n```\n\n::: {.cell-output .cell-output-error}\n\n```\nError in `geom_polygon()`:\n! Problem while setting up geom.\ni Error occurred in the 1st layer.\nCaused by error in `compute_geom_1()`:\n! `geom_polygon()` requires the following missing aesthetics: x and y\n```\n\n\n:::\n:::\n",
    "supporting": [
      "class_activity_5_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": null,
    "postProcess": false
  }
}